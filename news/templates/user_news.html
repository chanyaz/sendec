{% extends 'index_new.html' %}
{% load staticfiles %}
{% load my %}
{% load jsonate_tags %}
{% block user_news %}

    <script>
        function loadPage() {
            alert("in");
            $.get('/news/new_page/cp=1&np=2/').done(function (data) {
                alert("get ok");
            });
        }
    </script>


    <style>
        ul{
            list-style-type: none;
        }
        li{
            margin-left: 1%;
            margin-right: 1%;
            float: left;
        }
    </style>

    <div class="container-fluid">
        <div id="rss-news" style="border: solid 1px red; width: 70%; margin-left: 1%; float: left;">
                    RSS:<br>

                    {% for i in rss_news %}
                        <div class="current_rss_news_{{ i.id }}"
                             id="rss_id_{{ i.id }}"
                             data-current-rss-news-id="{{ i.id }}"
                             onclick="RssPreviewPopUpShow('{{ i|jsonate }}')"
                             style="width: 32%; height: 25em; margin-left: 1%; margin-top: 1%; border: solid 1px red; float: left;">
                            <div class="title">{{ i.title }}</div>
                            <div class="portal" style="float: left;">By <a href="/search/?q={{ i.portal_name_id }}">{{ i.portal_name_id }}</a></div>
                            <div class="published">&nbsp;|&nbsp;{{ i.date_posted.time }}</div>

                            <div class="news-image" style="background: url({{ i.id|get_rss_news_cover }}) no-repeat center; background-size: cover;  width: 100%; height: 50%;">
                            </div>

                            <div class="description">{{ i.post_text|safe|striptags|truncatewords:"9" }}</div>
                            <div class="navigation" style="float: right;">Share&nbsp;|&nbsp;Like</div>
                        </div>
                    {% endfor %}<br>

                <div class="pagination" style="margin-top: 5%; width: 200px; border: solid 1px red; ">
                    <ul>
                        {% if rss_news.has_previous %}
                            <li class="arrow"><a href="/news/usernews/page={{ rss_news.previous_page_number }}/">&laquo;</a></li>
                        {% else %}
                            <li class="arrow unavailable"><a href="">&laquo;</a></li>
                        {% endif %}
                        {% for page in rss_news.paginator.page_range %}
                            {% if page == rss_news.number %}
                                <li class="current"><a href="/news/usernews/page={{ page }}/">{{ page }}</a></li>
                            {% else %}
                                <li><a href="/news/usernews/page={{ page }}/">{{ page }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if rss_news.has_next %}
                            <li class="arrow"><a href="/news/usernews/page={{ rss_news.next_page_number }}/">&raquo;</a></li>
                        {% else %}
                            <li class="arrow unavailable"><a href="">&raquo;</a></li>
                        {% endif %}
                    </ul>
                </div>

            <div class="load_button" >
                <button id="button_load_more"
                        onclick="loadPage();"
                        data-current-page="1"
                        data-next-page="2">Load&nbsp;more</button>
            </div>



        </div>
        <div class="right-side" style="width: 28%; border: solid 1px orange; float: right;">
            <div class="choosen-portals" style="border: solid 1px red;">
                <button>Add&nbsp;content</button>
                <hr width="100%">
                User&nbsp;contents
                {% if portals != '' %}
                    {% for i in portals %}
                        <span class="user-portals">{{ i.id }}</span>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="twitter" style="border: solid 1px lawngreen;">
                {% include 'twitter.html' %}
            </div>
        </div>
    </div>

{% endblock %}