{% load endless %}
{% load my %}
{% load jsonate_tags %}

<style>
    .sect-rss-new{
        width: 100%;
        margin-bottom: 1%;
    }
    .category-name{
            position: absolute;
            z-index: 900;
            margin-top: -1%;
        }
        .category-name-content{
            background-color: blue;
            color: white;
            font-family: Georgia, Times, "Times New Roman", serif;
            text-transform: uppercase;
        }
    .category-link:hover{
        text-decoration: none;
    }
    .rss-title{
        margin-top: 15%;
        font-family: Georgia, Times, "Times New Roman", serif;
        font-size: 15px;
    }
    .sect-new{
        display: inline-block;
        width: 23%;
        margin-left: 1%;
{#        min-height: 213px;#}
    }
</style>

    {{ portal }}<br>
    <div id="current-portal-rss-news">

    <div class="any40items" style="height: inherit;">
{% paginate 20 portal_news %}
{% for i in portal_news %}
    <div class="sect-new" style="padding: 10% 10%;">
        {% if i.id|get_rss_news_cover != '[]' %}
            <div class="current_rss_news rss-rss"
                 id="rss_id_{{ i.id }}"
                 data-indx="{{ i.nuid }}"
                 data-current-rss-news-id="{{ i.id }}"
    {#             onclick="RssPreviewPopUpShow('{{ i|jsonate }}')">#}
                 onclick="RssPreviewPopUpShow('{{ i.id }}')">
            {% else %}
            <div class="current_rss_news_mas rss-rss"
                 id="rss_id_{{ i.id }}"
                 data-indx="{{ i.nuid }}"
                 data-current-rss-news-id="{{ i.id }}"
    {#             onclick="RssPreviewPopUpShow('{{ i|jsonate }}')">#}
                 onclick="RssPreviewPopUpShow('{{ i.id }}')">
            {% endif %}
        <div class="category-name">
                <span class="category-name-content">
                    &nbsp;{{ i.portal_name_id|get_rss_portal_name }}&nbsp;
                </span>
        </div>
            {% if i.id|get_rss_news_cover != '' %}
            <div class="news-image" style="background: url({{ i.id|get_rss_news_cover }}) no-repeat center; background-size: cover;  width: 100%; height: 50%;"></div>
            {% endif %}
            <div class="rss-title"><b>{{ i.title|safe|striptags }}</b></div>
    {#        <div class="portal" style="float: left;">By <a href="/search/?q={{ i.portal_name_id }}">{{ i.portal_name_id|get_rss_portal_name }}</a></div>#}
    {#        <div class="published">&nbsp;|&nbsp;{{ i.date_posted.time }}</div>#}
{#            <div class="description">{{ i.post_text|safe|striptags|truncatewords:"9" }}</div>#}
{#            <div class="navigation" style="float: right;">Share&nbsp;|&nbsp;Like</div>#}
        </div>
    </div>
{% endfor %}
    </div>
    {% show_more %}
    <script>
        $('.any40items').masonry({
              // options
            itemSelector: '.rss-rss',
{#            singleMode: true,#}
{#            isResizable: true,#}
{#            isAnimated: true,#}
{#            colu1mnWidth: 0#}
        });
    </script>
