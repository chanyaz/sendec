function stockchart(e){Highcharts.setOptions({lang:{rangeSelectorZoom:"",loading:"Loading "+e.tickSymbol+" stock data..."}}),tickSymbol=e.tickSymbol,chart_data=e.data,lastDate=e.date,companyName=e.cname,jQuery.isEmptyObject(chart_data.values)?$("#container").text("Sorry, No Data Available for "+tickSymbol):(pick="High"==chart_data.PHL["3M"]?1:0,getCharts(tickSymbol,"container",chart_data.values,"%b %d, %Y",pick))}function removeBorder(e){"undefined"!=typeof e.get("#border_rect")&&$("#border_rect").remove()}function drawBorder(e){var t=e.xAxis[0];e.renderer.rect(t.left,t.top,t.len,t.height,3).attr({"stroke-width":1,stroke:"#F1F1F1",fill:"none",id:"border_rect",zIndex:3}).add()}function getCharts(e,t,r,a,o){new Date(r[r.length-1][0]),new Date;area_graph_color=graph_border_color[o],window.chart=new Highcharts.StockChart({chart:{renderTo:t,borderRadius:0,marginLeft:5,backgroundColor:"#FFFFFF",marginBottom:40,marginTop:45,events:{load:function(){drawBorder(this)},redraw:function(){removeBorder(this),drawBorder(this)},click:function(){openExpandedChart()}}},title:{text:companyName+" Stock Price Chart",align:"left",verticalAlign:"top",style:{color:"#4D4D4D",fontSize:"14px",fontWeight:"bold"}},rangeSelector:{enabled:!1,inputEnabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},legend:{enabled:!0,borderRadius:0,borderWidth:0,align:"top",x:-3,y:35,layout:"horizontal",verticalAlign:"top",itemStyle:{fontSize:"10px"}},xAxis:{gridLineWidth:.3,gridZIndex:4,showLastLabel:!0,showFirstLabel:!0,dateTimeLabelFormats:{hour:"%I:%M %p"},lineWidth:0,tickWidth:0,ordinal:!1,labels:{style:{color:strokeColor}},events:{setExtremes:function(){}}},yAxis:{lineColor:"#CCCCCC",tickColor:"#CCCCCC",tickLength:5,tickWidth:2,id:"yAxis1",showLastLabel:!0,showFirstLabel:!0,gridLineWidth:0,gridZIndex:4,opposite:!0,labels:{align:"left",format:"{value:%0.1f}",formatter:function(){return this.value},style:{color:strokeColor}}},series:[{name:tickSymbol,id:tickSymbol+"_price",data:r,type:"area",threshold:null,color:graph_border_color[o],lineWidth:2,tooltip:{valueDecimals:2,xDateFormat:a},fillOpacity:.3,hover:{lineWidth:2}}],tooltip:{formatter:function(){var e=Highcharts.dateFormat(a,this.x);return e+="<br/>",$.each(this.points,function(){e+='<span style="color:'+this.series.color+'">'+this.series.name+"</span> : <b>"+this.y.toFixed(2)+"</b><br/>"}),e},style:{fontSize:"10px"}},plotOptions:{series:{compare:"none"},line:{events:{legendItemClick:function(){return!1}}}}})}function getTickChart(e){$.ajax({type:"GET",url:"http://amigobulls.com/json/data.php",data:{tick:e,callback:"stockchart"},dataType:"jsonp",crossDomain:!0}),resetLinkText(),setLinkText(e)}function showprice(e){ticker=e.tickSymbol,dpv=e.values,changeClass="tickergreen",dpv["Price Change"]<0&&-999!=dpv["Price Change"]&&(changeClass="tickerred"),price=dpv.Price,change=dpv["Price Change"]+" ("+dpv["Price Percentage Change"]+")",$("#"+escapeSelector(ticker)).find(".tick_val").append(price),$("#"+escapeSelector(ticker)).find(".tick_change").append(change),$("#"+escapeSelector(ticker)).find(".tick_change").addClass(changeClass)}function escapeSelector(e){return e.replace(/(:|\.|\[|\])/g,"\\$1")}function setLinkText(e){$("#"+escapeSelector(e)).addClass("backgroundColor"),$("#adv_"+escapeSelector(e)).show()}function resetLinkText(){$(".ticker_tr").removeClass("backgroundColor"),$(".adv_link").hide()}var fontColor="#4D4D4D",fillColor="#FFFFFF",strokeColor="#4D4D4D",graph_color=new Array("#FBE7E8","#D7F3BA"),graph_border_color=new Array("#D14440","#92DE3F"),plotLineColor="#ED1F24",plotline="PreviousClose",ts=Math.round((new Date).getTime()/1e3),nua=navigator.userAgent,is_android=nua.indexOf("Mozilla/5.0")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1&&!(nua.indexOf("Chrome")>-1),tickSymbol,chart_data,lastDate,companyName;$(document).ready(function(){getTickChart(companytick[0])}),$(document).ready(function(){for(var e=0;e<companytick.length;e++)$.ajax({type:"GET",url:"http://amigobulls.com/json/closePrice.php",data:{tick:companytick[e],callback:"showprice"},dataType:"jsonp",crossDomain:!0})});